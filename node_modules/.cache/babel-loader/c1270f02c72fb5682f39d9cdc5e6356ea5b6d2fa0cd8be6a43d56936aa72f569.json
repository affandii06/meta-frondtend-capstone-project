{"ast":null,"code":"var _jsxFileName = \"/Users/mplussoftware/Public/coursera/meta-frondtend-capstone-project/src/pages/Booking/BookingPage.jsx\",\n  _s = $RefreshSig$();\nimport { useCallback, useReducer, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Main, Heading, ProgressBar, Button, Icon } from '../../components';\nimport { faTimes, faArrowLeft } from '@fortawesome/free-solid-svg-icons';\nimport './BookingPage.css';\nimport { Outlet, useNavigate } from 'react-router-dom';\nimport { BookingForm } from './components';\nimport { FormContextProvider } from '../../context';\nimport { submitAPI } from '../../utilities';\nimport { bookingFormReducer, STAGES, loadInitialState } from '../../actions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const BookingPage = () => {\n  _s();\n  var _location$state2;\n  const location = useLocation();\n  const [state, dispatch] = useReducer(bookingFormReducer, loadInitialState());\n  useEffect(() => {\n    var _location$state;\n    if ((location === null || location === void 0 ? void 0 : (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.from) === 'navigation') dispatch({\n      type: 'reset'\n    });\n  }, [location === null || location === void 0 ? void 0 : (_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.from]);\n  const navigate = useNavigate();\n\n  /*****************************************************************/\n  /** Event Handling */\n  /*****************************************************************/\n  const goNextStage = useCallback(() => {\n    var _STAGES$indexOf;\n    const stageIndex = (_STAGES$indexOf = STAGES === null || STAGES === void 0 ? void 0 : STAGES.indexOf(state.stage)) !== null && _STAGES$indexOf !== void 0 ? _STAGES$indexOf : STAGES.length;\n    if (stageIndex < STAGES.length - 1) {\n      dispatch({\n        type: 'setStage',\n        payload: STAGES[stageIndex + 1]\n      });\n    }\n    return;\n  }, [state.stage]);\n  const goPreviousStage = useCallback(() => {\n    var _STAGES$indexOf2;\n    const stageIndex = (_STAGES$indexOf2 = STAGES === null || STAGES === void 0 ? void 0 : STAGES.indexOf(state.stage)) !== null && _STAGES$indexOf2 !== void 0 ? _STAGES$indexOf2 : 0;\n    if (stageIndex > 0) {\n      dispatch({\n        type: 'setStage',\n        payload: STAGES[stageIndex - 1]\n      });\n    } else {\n      navigate('/');\n    }\n    return;\n  }, [state.stage, navigate]);\n  const submitForm = e => {\n    e.preventDefault();\n    try {\n      // Loop through the state.formErrors object and find if any fields have errors\n      if (Object.values(state.formErrors).find(val => val.length > 0)) {\n        throw new Error('Form could not be submitted - contains errors!');\n      }\n\n      // Submit Form\n      const response = submitAPI({\n        booking_id: state.booking_id,\n        ...state.formData\n      });\n      if (response) {\n        goNextStage();\n        navigate('thank-you');\n      } else throw new Error('Form could not be submitted to the server.');\n    } catch (err) {\n      console.log(err.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Main, {\n    children: [/*#__PURE__*/_jsxDEV(ProgressBar, {\n      value: (STAGES.indexOf(state.stage) + 1) / STAGES.length * 100\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"LL-BookingPageNavigation\",\n      children: [STAGES[STAGES.length - 1] !== state.stage && /*#__PURE__*/_jsxDEV(Button, {\n        ariaLabel: \"Go Back\",\n        unstyled: true,\n        onClick: goPreviousStage,\n        children: /*#__PURE__*/_jsxDEV(Icon, {\n          src: faArrowLeft,\n          size: \"2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Heading, {\n        tag: \"h1\",\n        size: \"xl\",\n        align: \"center\",\n        children: state.stage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), STAGES[STAGES.length - 1] !== state.stage && /*#__PURE__*/_jsxDEV(Button, {\n        ariaLabel: \"Exit\",\n        unstyled: true,\n        onClick: () => {},\n        children: /*#__PURE__*/_jsxDEV(Icon, {\n          src: faTimes,\n          size: \"2x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FormContextProvider, {\n      value: {\n        state,\n        dispatch\n      },\n      children: [STAGES.indexOf(state.stage) === 0 && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"LL-BookingPageContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          id: \"LL-BookingPageHero\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"https://ik.imagekit.io/zenius/Coursera/html-css/little-lemon-restaurant_wsHVlbvkh.jpg?ik-sdk-version=javascript-1.4.3&updatedAt=1675153797856&tr=w-1080%2Ch-1350%2Cfo-auto\",\n            alt: \"Little Lemon - Seating\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(BookingForm, {\n          onSubmit: submitForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Outlet, {\n        context: {\n          data: {\n            booking_id: state.booking_id,\n            ...state.formData\n          },\n          stage: state.stage\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(BookingPage, \"CKgfz/+BFu3f74KhFVcOPRtA6J4=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = BookingPage;\nvar _c;\n$RefreshReg$(_c, \"BookingPage\");","map":{"version":3,"names":["useCallback","useReducer","useEffect","useLocation","Main","Heading","ProgressBar","Button","Icon","faTimes","faArrowLeft","Outlet","useNavigate","BookingForm","FormContextProvider","submitAPI","bookingFormReducer","STAGES","loadInitialState","BookingPage","location","state","dispatch","from","type","navigate","goNextStage","stageIndex","indexOf","stage","length","payload","goPreviousStage","submitForm","e","preventDefault","Object","values","formErrors","find","val","Error","response","booking_id","formData","err","console","log","message","data"],"sources":["/Users/mplussoftware/Public/coursera/meta-frondtend-capstone-project/src/pages/Booking/BookingPage.jsx"],"sourcesContent":["import { useCallback, useReducer, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Main, Heading, ProgressBar, Button, Icon } from '../../components';\nimport { faTimes, faArrowLeft } from '@fortawesome/free-solid-svg-icons';\nimport './BookingPage.css';\nimport { Outlet, useNavigate } from 'react-router-dom';\nimport { BookingForm } from './components';\nimport { FormContextProvider } from '../../context';\nimport { submitAPI } from '../../utilities';\n\nimport { bookingFormReducer, STAGES, loadInitialState } from '../../actions';\n\nexport const BookingPage = () => {\n  const location = useLocation();\n\n  const [state, dispatch] = useReducer(bookingFormReducer, loadInitialState());\n\n  useEffect(() => {\n    if (location?.state?.from === 'navigation') dispatch({ type: 'reset' });\n  }, [location?.state?.from]);\n\n  const navigate = useNavigate();\n\n  /*****************************************************************/\n  /** Event Handling */\n  /*****************************************************************/\n  const goNextStage = useCallback(() => {\n    const stageIndex = STAGES?.indexOf(state.stage) ?? STAGES.length;\n    if (stageIndex < STAGES.length - 1) {\n      dispatch({ type: 'setStage', payload: STAGES[stageIndex + 1] });\n    }\n    return;\n  }, [state.stage]);\n\n  const goPreviousStage = useCallback(() => {\n    const stageIndex = STAGES?.indexOf(state.stage) ?? 0;\n    if (stageIndex > 0) {\n      dispatch({ type: 'setStage', payload: STAGES[stageIndex - 1] });\n    } else {\n      navigate('/');\n    }\n    return;\n  }, [state.stage, navigate]);\n\n  const submitForm = e => {\n    e.preventDefault();\n    try {\n      // Loop through the state.formErrors object and find if any fields have errors\n      if (Object.values(state.formErrors).find(val => val.length > 0)) {\n        throw new Error('Form could not be submitted - contains errors!');\n      }\n\n      // Submit Form\n      const response = submitAPI({\n        booking_id: state.booking_id,\n        ...state.formData,\n      });\n      if (response) {\n        goNextStage();\n        navigate('thank-you');\n      } else throw new Error('Form could not be submitted to the server.');\n    } catch (err) {\n      console.log(err.message);\n    }\n  };\n\n  return (\n    <Main>\n      <ProgressBar\n        value={((STAGES.indexOf(state.stage) + 1) / STAGES.length) * 100}\n      />\n\n      <nav className=\"LL-BookingPageNavigation\">\n        {STAGES[STAGES.length - 1] !== state.stage && (\n          <Button ariaLabel=\"Go Back\" unstyled onClick={goPreviousStage}>\n            <Icon src={faArrowLeft} size=\"2x\" />\n          </Button>\n        )}\n        <Heading tag=\"h1\" size=\"xl\" align=\"center\">\n          {state.stage}\n        </Heading>\n        {STAGES[STAGES.length - 1] !== state.stage && (\n          <Button ariaLabel=\"Exit\" unstyled onClick={() => {}}>\n            <Icon src={faTimes} size=\"2x\" />\n          </Button>\n        )}\n      </nav>\n\n      <FormContextProvider value={{ state, dispatch }}>\n        {STAGES.indexOf(state.stage) === 0 && (\n          <section className=\"LL-BookingPageContainer\">\n            {/** Enter Content for Larger Screens */}\n            <section id=\"LL-BookingPageHero\">\n              <img\n                src=\"https://ik.imagekit.io/zenius/Coursera/html-css/little-lemon-restaurant_wsHVlbvkh.jpg?ik-sdk-version=javascript-1.4.3&updatedAt=1675153797856&tr=w-1080%2Ch-1350%2Cfo-auto\"\n                alt=\"Little Lemon - Seating\"\n              />\n            </section>\n            <BookingForm onSubmit={submitForm} />\n          </section>\n        )}\n        <Outlet\n          context={{\n            data: { booking_id: state.booking_id, ...state.formData },\n            stage: state.stage,\n          }}\n        />\n      </FormContextProvider>\n    </Main>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}